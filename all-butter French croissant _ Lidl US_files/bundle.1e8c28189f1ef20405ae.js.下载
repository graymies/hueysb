(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1150:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(22),o=n.n(r),a=n(1168),i=Object(a.extendMoment)(o.a)},1158:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n.n(r),a=function(e){var t=e.city,n=e.street,r=e.state,a=e.zip;return o.a.createElement("div",{className:"address",itemProp:"address",itemScope:!0,itemType:"http://schema.org/PostalAddress",tabIndex:0},o.a.createElement("div",{itemProp:"streetAddress","data-test":"address"},n),o.a.createElement("div",{className:"address-area-container"},o.a.createElement("span",{itemProp:"addressLocality","data-test":"city"}," ",t),",",o.a.createElement("span",{itemProp:"addressRegion","data-test":"state"}," ",r),o.a.createElement("span",{itemProp:"postalCode","data-test":"zip"}," ",a)))}},1181:function(e,t,n){"use strict";n.d(t,"a",function(){return s});n(23),n(210);var r=n(1182),o=n.n(r),a=n(1183),i=n.n(a);function s(e,t){var n=i()(e).join(", ");return e.length>1?"".concat(n).concat(t," ").concat(o()(e)):o()(e)||""}},1182:function(e,t,n){var r=n(654)(-1);e.exports=r},1183:function(e,t,n){var r=n(653)(0,-1);e.exports=r},1184:function(e,t,n){"use strict";n.d(t,"a",function(){return h});n(7),n(15),n(20),n(23),n(16),n(210),n(12),n(34),n(35),n(10),n(50),n(18),n(211),n(17);var r=n(0),o=n.n(r),a=n(4),i=n.n(a),s=n(47),c=n(9);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?p(e):t}(this,f(t).call(this,e)),Object(s.a)(p(n)),n.state={open:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,o.a.Component),function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(t,[{key:"tooltipClick",value:function(){this.props.onTooltipClick&&this.props.onTooltipClick(this.props.store)}},{key:"render",value:function(){var e=this,t=this.props,n=t.store,r=t.className,a=this.state.open,s=[n.address.street,n.address.city,n.address.state,n.address.zip].join(" ").split(" ").join("+"),l="https://maps.google.com?saddr=Current+Location&daddr=".concat(s);return o.a.createElement("div",{className:i()("map-marker",r),onClick:function(){return e.setState({open:!a})}},this.state.open&&o.a.createElement(c.a,{className:"map-marker-tooltip",onClick:this.tooltipClick,to:l},"".concat(n.address.street," ").concat(n.address.zip)," ",o.a.createElement("div",{className:"arrow"})))}}]),t}()},1185:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={key:n(40).a.google.places,language:"en",libraries:"places"}},1194:function(e,t,n){"use strict";n(650),n(24);var r=n(140),o=n.n(r),a=(n(23),n(22)),i=n.n(a);function s(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:i()()).format("YYYY-MM-DD");return i()("".concat(t,"T").concat(e))}var c,l=n(1150);function u(e){var t=Object(l.a)(),n=f(e);if(n&&n.openingTime&&n.closingTime){var r=function(e){if(!e.openingTime||!e.closingTime)return null;var t=Object(l.a)(),n=s(e.openingTime,t),r=s(e.closingTime,t);return r.isSameOrBefore(n)&&r.add(1,"day"),{openingTime:n,closingTime:r}}(n),o=r.openingTime,a=r.closingTime;return Object(l.a)().range(o,a).contains(t)?c.OPEN:c.CLOSED}return c.UNKNOWN}function f(e){var t=e.hours,n=t.regularHours,r=t.holidayHours,a=t.specialHours;return r&&function(e){var t=Object(l.a)().format("YYYY-MM-DD");return o()(function(e){return t===e.holidayDate},e)}(r)||a&&function(e){return o()(function(e){var t=Object(l.a)(e.startDate,"YYYY-MM-DD"),n=Object(l.a)(e.endDate,"YYYY-MM-DD").hour(23).minutes(59).seconds(59),r=l.a.range(t,n),o=Object(l.a)();return r.contains(o,{exclusive:!1})},e)}(a)||n&&function(e){var t=Object(l.a)().isoWeekday();return e.find(function(e){return e.daysOfWeek&&e.daysOfWeek.indexOf(t)>-1})}(n)}n.d(t,"a",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"b",function(){return f}),function(e){e[e.OPEN=0]="OPEN",e[e.CLOSED=1]="CLOSED",e[e.UNKNOWN=2]="UNKNOWN"}(c||(c={}))},1379:function(e,t,n){"use strict";n.r(t);n(7),n(15),n(20),n(24),n(16),n(32),n(12),n(34),n(35),n(10),n(68),n(50),n(18),n(172),n(338),n(17);var r=n(166),o=n.n(r),a=n(453),i=n.n(a),s=(n(126),n(0)),c=n.n(s),l=n(14),u=n(21),f=n(308),p=n(117),d=n(47),h=n(1),m=n(19),b=n(1181),g=n(1184),S=(n(23),n(76),n(11),n(9)),O=n(4),y=n.n(O),v=n(260),E=n(46),_=n(449),j=n(1158),k=n(31),N=n(178),T=n(1194);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return I(L(n=function(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?L(e):t}(this,(e=P(t)).call.apply(e,[this].concat(o)))),"state",{isSettingStore:!1,dialog:null}),I(L(n),"setStore",function(){if(!n.props.isAuthenticated)return n.setState({dialog:"login"});n.setState({isSettingStore:!0}),n.props.dispatch(k.k(n.props.lidlStore.id)).then(function(){return n.setState({isSettingStore:!1})},function(){return n.setState({isSettingStore:!1})})}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,c.a.Component),function(e,t,n){t&&w(e.prototype,t),n&&w(e,n)}(t,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.lidlStore,o=n.activeStore,a=n.onStoreInfoClick,i=n.selectStore,s=R(n,["lidlStore","activeStore","onStoreInfoClick","selectStore"]),u=Object(T.b)(r),f=Object(T.c)(r),p=f===T.a.UNKNOWN?Object(h.c)("STORE_HOURS_TODAY"):Object(h.c)(f===T.a.OPEN?"STORE_HOURS_OPEN":"STORE_HOURS_CLOSED");return e=o&&o.id===r.id?c.a.createElement(_.a,{className:"my-store-label",iconName:"menu-stores",iconPosition:"after","data-test":"my-store",text:Object(h.c)("STORE_MY_STORE")}):c.a.createElement(v.a,{pending:!!this.state.isSettingStore,color:"green","data-test":"setAsMyStoreButton",onClick:this.setStore},Object(h.c)("STORE_SEARCH_CARD_SET_STORE")),c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{className:y()("store-search-card",s.className)},c.a.createElement("button",{type:"button",onClick:function(){return i(r)}},c.a.createElement(E.c,null,c.a.createElement(l.c,{className:"city","data-test":"storeName"},r.name),c.a.createElement(j.a,{city:r.address.city,street:r.address.street,state:r.address.state,zip:r.address.zip}),u&&c.a.createElement("div",{className:"store-info-hours"},c.a.createElement("span",{className:"store-status"},p),f!==T.a.CLOSED&&u.hours))),c.a.createElement(E.b,null,c.a.createElement(S.a,{theme:"flat",color:"blue",to:"/stores/".concat(r.id),onClick:a,className:"store-info-btn","data-test":"storeInfo"},Object(h.c)("STORE_SEARCH_CARD_STORE_INFO")),e)),this.state.dialog&&c.a.createElement(N.a,{onClose:function(e){"login-success"===e&&t.state.dialog&&t.props.dispatch(k.k(r.id)),t.setState({dialog:null})}}))}}]),t}(),x=Object(m.a)(function(e){return{isAuthenticated:!!e.auth.token}})(D),F=n(70),Y=n(306),H=n(55),M=n(443),z=n(108),U=n(36),B=n(495),G=n(1185);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),e}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"FindStore",function(){return re});var $,ee=n(1212).default,te={lat:38.87868,lng:-77.10124};!function(e){e[e.Close=11]="Close",e[e.Far=6]="Far"}($||($={}));var ne=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Z(q(n=function(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?q(e):t}(this,J(t).call(this,e))),"suggestionCallbackId",void 0),Z(q(n),"map",null),Z(q(n),"sessionToken",void 0),Z(q(n),"state",{search:"",dialog:null,suggestions:[],zoomLevel:$.Far}),Object(d.a)(q(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,c.a.Component),V(t,[{key:"isGoogleApiAvailable",get:function(){return"undefined"!=typeof google}}]),V(t,[{key:"fetchData",value:function(){this.props.dispatch(Object(Y.d)("storeOpenings")),this.props.dispatch(Object(F.e)())}},{key:"UNSAFE_componentWillMount",value:function(){return this.fetchData()}},{key:"getGeoLocation",value:function(){var e=this;this.props.dispatch(Object(U.x)(null,{Category:"Stores",Action:"Use Current Location"})),this.setState({isSearching:!0}),navigator.geolocation.getCurrentPosition(function(t){t&&(e.props.dispatch(Object(F.h)({lat:t.coords.latitude,lon:t.coords.longitude})),e.setState({search:e.state.search,isSearching:!1,geolocation:{lat:t.coords.latitude,lng:t.coords.longitude},zoomLevel:$.Far}))},function(){e.setState({isSearching:!1})})}},{key:"getBounds",value:function(){if(this.isGoogleApiAvailable){for(var e=this.props.searchStores,t=new google.maps.LatLngBounds,n=0;n<e.length;n++){var r=e[n].coordinates;t.extend(new google.maps.LatLng(r.lat,r.lon))}return t}}},{key:"fitBounds",value:function(){if(this.map){var e=this.getBounds();e&&this.map.fitBounds(e,32)}}},{key:"calcSearchStoresCenter",value:function(){var e=this.props.searchStores.length>0&&this.getBounds(),t=e&&e.getCenter();return t?{lat:t.lat(),lng:t.lng()}:te}},{key:"getLatLong",value:function(){var e=this.props,t=e.searchStores,n=e.activeStore,r=this.state.geolocation;return r||(t.length?this.calcSearchStoresCenter():n?{lat:n.coordinates.lat,lng:n.coordinates.lon}:te)}},{key:"onSearchSubmit",value:function(e,t){var n=this;this.setState({geolocation:void 0,isSearching:!0,suggestions:[]}),this.props.dispatch(Object(F.i)(e.search)).then(function(){n.setState({isSearching:!1}),n.props.searchStores.length&&n.setState({geolocation:n.calcSearchStoresCenter(),zoomLevel:$.Far},function(){n.fitBounds()})})}},{key:"onSearchChange",value:function(e,t){var n=this;if(!t&&this.isGoogleApiAvailable){this.suggestionCallbackId&&(clearTimeout(this.suggestionCallbackId),this.suggestionCallbackId=void 0);var r=e.search;this.setState({search:r,zoomLevel:$.Far}),r.trim().length<f.a||(this.suggestionCallbackId=setTimeout(function(){var o=n.sessionToken||(n.sessionToken=new google.maps.places.AutocompleteSessionToken);Object(B.a)(r,o).then(function(e){return n.setState({suggestions:e})}).catch(function(){return n.onSearchSubmit(e,t)})},600))}}},{key:"onSuggestionClick",value:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){K(a,r,o,i,s,"next",e)}function s(e){K(a,r,o,i,s,"throw",e)}i(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.map&&this.sessionToken){e.next=2;break}return e.abrupt("return");case 2:return n=t.terms[0].value,this.setState({search:n,suggestions:[],zoomLevel:$.Far}),e.prev=4,e.next=7,Object(B.b)(t.place_id,this.map,this.sessionToken);case 7:a=e.sent,r=a.lat,o=a.lng,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(4),this.onSearchSubmit({search:n},!0),e.abrupt("return");case 16:return e.prev=16,this.sessionToken=void 0,e.finish(16);case 19:return e.next=21,this.props.dispatch(Object(F.h)({lat:r,lon:o}));case 21:this.setState({isSearching:!1,geolocation:{lat:r,lng:o}});case 22:case"end":return e.stop()}},e,this,[[4,12,16,19]])}));return function(t){return e.apply(this,arguments)}}()},{key:"renderAuthedStoreList",value:function(e,t){var n=this;return this.state.isSearching?c.a.createElement(z.a,null):e.length||this.state.search.length||!this.state.geolocation?e.length||this.state.search.length?!e.length&&this.state.search.length?c.a.createElement(l.c,null,Object(h.c)("FIND_STORE_NO_RESULTS")):e.map(function(e){return n.renderStoreCard(e,t)}):c.a.createElement(l.c,null,Object(h.c)("FIND_STORE_SEARCH_PROMPT")):c.a.createElement(l.c,null,Object(h.c)("FIND_STORE_NO_RESULTS"))}},{key:"renderStoreCard",value:function(e,t){var n=this;return c.a.createElement(x,{lidlStore:e,key:e.id,activeStore:t,selectStore:function(e){n.setState({geolocation:{lat:e.coordinates.lat,lng:e.coordinates.lon},zoomLevel:$.Close})}})}},{key:"renderStoreOpenings",value:function(e){var t=i()("name",o()(e.map(function(e){return e.state}))),n=Object(b.a)(t," ".concat(Object(h.c)("FORMAT_LIST_AND")));return c.a.createElement("div",{className:"find-store--store-openings"},c.a.createElement(l.k,{tabIndex:0},Object(h.c)("STORE_OPENINGS_SEARCH_TITLE")),c.a.createElement("p",{className:"find-store--store-openings-description",tabIndex:0},Object(h.c)("STORE_OPENINGS_SEARCH_DESCRIPTION")," ",n,"!"),c.a.createElement(S.a,{theme:"flat",color:"blue",to:"/grand-openings","data-test":"storeOpeningsLink","aria-label":"see all stores"},Object(h.c)("STORE_OPENINGS_SEARCH_LINK")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.searchStores,r=t.activeStore,o=this.getLatLong();return c.a.createElement("div",{className:"find-store-container"},c.a.createElement("div",{className:"find-store-body"},c.a.createElement("div",{className:"list-container"},c.a.createElement(p.b,{onSubmit:this.onSearchSubmit,onChange:this.onSearchChange},c.a.createElement("div",{className:"set-my-store"},c.a.createElement(l.k,{tabIndex:0,component:"h3"},Object(h.c)("FIND_STORE_TITLE")),navigator.geolocation&&c.a.createElement(u.a,{theme:"flat",color:"blue",onClick:this.getGeoLocation},Object(h.c)("FIND_STORE_PRECISE_LOC"))),c.a.createElement(f.b,{className:"search-bar",styleType:"primary",type:"text",name:"search",iconName:"find-store",label:Object(h.c)("FIND_STORE_SEARCH_PLACEHOLDER"),"data-test":"storeSearchField",value:this.state.search,options:this.state.suggestions,renderOption:function(e){return c.a.createElement("div",null,e.description)},generateKey:function(e){return e.place_id},filterOptions:function(e,t){return-1===t.types.indexOf("administrative_area_level_1")},onSubmit:this.onSuggestionClick})),n||r?c.a.createElement("div",null):c.a.createElement(l.c,{className:"nearby"},Object(h.c)("FIND_STORE_HEADER_RESULTS")),r?this.renderStoreCard(r,r):null,this.renderAuthedStoreList(n,r),"loaded"===this.props.storeOpeningsJSON.type&&this.props.storeOpeningsJSON.payload.length>0&&this.renderStoreOpenings(this.props.storeOpeningsJSON.payload)),c.a.createElement("div",{className:"detail-container"},c.a.createElement("span",null),c.a.createElement(ee,{center:o,zoom:this.state.zoomLevel,bootstrapURLKeys:G.a,onGoogleApiLoaded:function(t){var n=t.map;e.map=n,e.fitBounds()},yesIWantToUseGoogleMapApiInternals:!0},n.map(function(e){return c.a.createElement(g.a,{lat:e.coordinates.lat,lng:e.coordinates.lon,key:e.id,onTooltipClick:function(){return!1},store:e})})))))}}]),t}(),re=Object(m.a)(function(e){return{activeStore:Object(H.b)(e),searchStores:Object(H.f)(e),storeOpeningsJSON:Object(M.b)(e,"storeOpenings")}})(ne)}}]);
//# sourceMappingURL=bundle.1e8c28189f1ef20405ae.js.map